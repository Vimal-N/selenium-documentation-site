<!DOCTYPE html>
<link rel="stylesheet" href="{{"css/header.css" | relURL}}"/>

<html>
<head>
  <title>{{ .Title }}</title>
  <link rel="icon" href="{{"favicon.ico" | relURL}}" type="image/png">
  <meta name="viewport" content="width=device-width,initial-scale=1">
</head>

<header id="header" class="header">
    <a href="{{ .Site.BaseURL }}" class="headerLink">
      <img class="logo logo-large" src="{{"images/selenium_logo_large.png" | relURL}}"/>
      <img class="logo logo-small" src="{{"images/selenium_logo_square_green.png" | relURL}}"/>
      <img class="logo logo-small logo-hide" src="{{"images/selenium_logo_square_white.png" | relURL}}"/>
    </a>

  <a id="dropdownButton" class="dropdownButton" onClick="toggleMenu()">MENU +</a>
	<nav id="navbar" class="navbar">
        <div class="nav-item" onClick="toggleAboutNav()">
            <span>About</span>
            <div id="aboutArrow" class="arrow-down"></div>
        </div>
              <ul id="aboutSubnav" class="about-subnav">
                  <div class="subnav subnav-item">
                    <a href="{{"about" | relURL}}">About</a>
                  </div>
                  <div class="subnav subnav-item">
                    <a href="{{"events" | relURL}}">Events</a>
                  </div>
                  <div class="subnav subnav-item">
                    <a href="{{"ecosystem" | relURL}}">Ecosystem</a>
                  </div>
                  <div class="subnav subnav-item">
                    <a href="{{"history" | relURL}}">History</a>
                  </div>
                  <div class="subnav subnav-item">
                    <a href="{{"getinvolved" | relURL}}">Get Involved</a>
                  </div>
                  <div class="subnav subnav-item">
                    <a href="{{"sponsors" | relURL}}">Sponsors</a>
                  </div>
              </ul>
		<a class="nav-item" href="{{"downloads" | relURL}}">Downloads</a>
		<a class="nav-item" href="{{"projects" | relURL}}">Projects</a>
		<a class="nav-item" href="{{"documentation" | relURL}}">Documentation</a>
		<a class="nav-item" href="{{"support" | relURL}}">Support</a>
		<a class="nav-item" href="{{"blog" | relURL}}">Blog</a>
        <div class="nav-item">
        <div class="search-bar-container">
            <!--<div class="search-bar" onFocus="activateSearch()">-->
                <!--<input />-->
                <!--<img class="search-icon" src="{{"images/search.png" | relURL}}"/>-->
            <!--</div>-->
            <script>
              (function() {
                var cx = '018435082943254453647:ktxsp1-jcb8';
                var gcse = document.createElement('script');
                gcse.type = 'text/javascript';
                gcse.async = true;
                gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(gcse, s);
              })();
            </script>
            <gcse:searchbox-only></gcse:searchbox-only>
            <img class="search-icon" src="{{"images/search.png" | relURL}}"/>
        </div>
        </div>
  </nav>
</header>
<body>

<script>
  function activateSearch() {
    console.log('ACTIVATE')
  }

  function toggleMenu() {
    const navbarItems = document.getElementsByClassName("nav-item");
    const navbarElements = [...navbarItems];
    const smallLogos = document.getElementsByClassName("logo logo-small");
    const logoElements = [...smallLogos];
    const header = document.getElementById("header");
    const dropdownButton = document.getElementById("dropdownButton");
    const subnavs = document.getElementsByClassName("about-subnav");
    const subnavElements = [...subnavs];
    const aboutArrow = document.getElementById("aboutArrow");

    if(dropdownButton.innerText === "MENU +") {
      dropdownButton.innerText = "MENU -"
    } else dropdownButton.innerText = "MENU +"

    // each PRIMARY link in navbar
    navbarElements.forEach(element => {
      if(element.className === "nav-item") {
        element.className += " dropdown-active"
      } else {
        element.className = "nav-item"
      }
    })

    // disable subnav elements in case they are active
    subnavElements.forEach(element => {
      element.className = "about-subnav";
    });

    // arrows should face down when user returns
    aboutArrow.className = "arrow-down";

    // toggles green/grey logo
    logoElements.forEach(element => {
      if(element.className.includes("logo-hide")) {
        element.className = "logo logo-small"
      } else {
        element.className += " logo-hide"
      }
    })

    // toggle background color of header/dropdown
    if(header.className === "header") {
      header.className += " dropdown-active"
    } else {
      header.className = "header"
    }
  }

  function toggleAboutNav() {
    const aboutSubnav = document.getElementById("aboutSubnav");
    const aboutArrow = document.getElementById("aboutArrow");

    if(aboutSubnav.className === "about-subnav") {
      aboutSubnav.className += " about-subnav-active";
    } else {
      aboutSubnav.className = "about-subnav"
    }

    if(aboutArrow.className === "arrow-up") aboutArrow.className = "arrow-down";
    else aboutArrow.className = "arrow-up";
  }
</script>
